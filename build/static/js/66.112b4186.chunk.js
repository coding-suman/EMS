"use strict";(self.webpackChunkems=self.webpackChunkems||[]).push([[66],{9066:(e,s,r)=>{r.r(s),r.d(s,{default:()=>h});var a=r(5043),t=r(4858),d=r(8403),l=r(3799),i=r(3003),o=r(8425),m=r(5607),n=r(3401),c=r(3216),u=r(579);const h=()=>{const e=(0,c.Zp)(),s=(0,i.wA)(),{user:r,token:h}=(0,i.d4)((e=>e.auth)),p=!!h;(0,a.useEffect)((()=>{p&&("Admin"===(null===r||void 0===r?void 0:r.role)?e("/admin"):"Employee"===(null===r||void 0===r?void 0:r.role)&&e("/dashboard"))}),[p,r,e]);const{register:b,handleSubmit:x,formState:{errors:f}}=(0,t.mN)({resolver:(0,d.t)(l.U)});return(0,u.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gray-100",children:(0,u.jsxs)("div",{className:"w-full max-w-md p-8 bg-white shadow-md rounded-lg",children:[(0,u.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Login Page"}),(0,u.jsxs)("form",{onSubmit:x((async r=>{try{const a=await m.A.post("auth/login",r);localStorage.setItem("user",JSON.stringify(a.data.user)),localStorage.setItem("token",a.data.token),s((0,o.iD)(a.data)),n.oR.success("Logged in successfully!"),"Admin"===a.data.user.role?e("/admin"):"Employee"===a.data.user.role&&e("/dashboard")}catch(a){console.error("Login failed:",a),n.oR.error("Login failed. Please check your credentials.")}})),className:"space-y-4",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email:"}),(0,u.jsx)("input",{type:"email",...b("email"),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md"}),f.email&&(0,u.jsx)("p",{className:"text-red-500 text-sm",children:f.email.message})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Password:"}),(0,u.jsx)("input",{type:"password",...b("password"),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md"}),f.password&&(0,u.jsx)("p",{className:"text-red-500 text-sm",children:f.password.message})]}),(0,u.jsx)("button",{type:"submit",className:"w-full py-2 px-4 bg-blue-500 text-white font-bold rounded-md hover:bg-blue-600",children:"Login"})]})]})})}},3799:(e,s,r)=>{r.d(s,{U:()=>t,a:()=>d});var a=r(899);const t=a.Ik().shape({email:a.Yj().email("Invalid email format").required("Email is required"),password:a.Yj().min(6,"Password must be at least 6 characters long").required("Password is required")}),d=a.Ik().shape({firtname:a.Yj().required("First name is required"),lastname:a.Yj().required("Lats name is required"),email:a.Yj().email("Invalid email format").required("Email is required"),password:a.Yj().min(6,"Password must be at least 6 characters long").required("Password is required"),confirmPassword:a.Yj().oneOf([a.KR("password"),null],"Passwords must match").required("Confirm password is required")})}}]);
//# sourceMappingURL=66.112b4186.chunk.js.map